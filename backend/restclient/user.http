@baseUrl = http://localhost:3000/api
@authToken = {{login.response.body.token}}
@adminToken = {{adminLogin.response.body.token}}

### Variables for testing
@testEmail = test@example.com
@testPhone = +254712345678
@testUserId = 123e4567-e89b-12d3-a456-426614174000

### Get auth token (normal user)
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
    "email": "user@example.com",
    "password": "password123"
}

### Get auth token (admin user)
# @name adminLogin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
    "email": "admin@example.com",
    "password": "adminpass123"
}

### Public Routes ###

### Get user by email
GET {{baseUrl}}/users/{{testEmail}}

### Get user by phone
GET {{baseUrl}}/users/phone/{{testPhone}}

### Protected User Routes ###

### Get own profile
GET {{baseUrl}}/users/profile/me
Authorization: Bearer {{authToken}}

### Update profile
PUT {{baseUrl}}/users/profile/update
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "name": "Updated Name",
    "bio": "New bio",
    "phoneNumber": "+254712345678"
}

### Change password
PUT {{baseUrl}}/users/profile/change-password
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "newPassword": "newPassword123"
}

### Deactivate own account
POST {{baseUrl}}/users/profile/deactivate
Authorization: Bearer {{authToken}}

### Request instructor role
POST {{baseUrl}}/users/instructor/request
Authorization: Bearer {{authToken}}

### Protected Admin Routes ###

### Get all users
GET {{baseUrl}}/users/admin/all
Authorization: Bearer {{adminToken}}

### Get active users
GET {{baseUrl}}/users/admin/active
Authorization: Bearer {{adminToken}}

### Get inactive users
GET {{baseUrl}}/users/admin/inactive
Authorization: Bearer {{adminToken}}

### Get users by role
GET {{baseUrl}}/users/admin/role/INSTRUCTOR
Authorization: Bearer {{adminToken}}

### Get instructor requests
GET {{baseUrl}}/users/admin/instructor-requests
Authorization: Bearer {{adminToken}}

### Get specific instructor
GET {{baseUrl}}/users/instructor/{{testUserId}}
Authorization: Bearer {{adminToken}}

### Approve instructor request
POST {{baseUrl}}/users/admin/approve-instructor/{{testUserId}}
Authorization: Bearer {{adminToken}}

### Reject instructor request
POST {{baseUrl}}/users/admin/reject-instructor/{{testUserId}}
Authorization: Bearer {{adminToken}}

### Assign role
PUT {{baseUrl}}/users/admin/assign-role/{{testUserId}}
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
    "role": "INSTRUCTOR"
}

### Delete user account
DELETE {{baseUrl}}/users/admin/delete/{{testUserId}}
Authorization: Bearer {{adminToken}}

### Activate user account
POST {{baseUrl}}/users/admin/activate/{{testUserId}}
Authorization: Bearer {{adminToken}}

